
<!DOCTYPE html>
<html>
<head>
    <title>Market Simulation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <canvas id="stockChart"></canvas>
    <button onclick="refreshSimulation()">Refresh Simulation</button>

<script>
    var ctx = document.getElementById('stockChart').getContext('2d');
    var stockChart = new Chart(ctx, {
        type: 'line',
        data: {
            datasets: []
        },
        options: {
            scales: {
                x: {
                    type: 'linear',
                    position: 'bottom'
                },
                y: {
                    beginAtZero: true  // Adjust as needed for your scale
                }
            }
        }
    });

    function refreshSimulation() {
        $.getJSON('/simulate', function(data) {
            var stockData = {
                label: 'Stock Prices',
                data: data.stockPrices,
                borderColor: '#007bff',
                fill:false
            };

            var stockDataset = {
                label: 'Stock Prices',
                data: stockData,
                borderColor: '#007bff', // Example color
                fill: false
            };

            var redLineDataset = {
                label: 'News Spread Day',
                borderColor: 'red',
                borderWidth: 2,
                pointRadius: 0,
                fill: false,
                data: [{x: 50, y: 0}, {x: 50, y: 200}],
                type: 'line',
                order: 0
            };

            stockChart.data.datasets = [stockDataset, redLineDataset];
            stockChart.update();
        });
    }
</script>
</body>
</html>

